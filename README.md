# **АИС «Фитнес-клуб»**

## **Общая информация о проекте**

Данный проект представляет собой **автоматизированную информационную систему (АИС) для фитнес-клуба**, разрабатываемую в рамках учебной практики.

Цель проекта — создать удобную, логичную и масштабируемую систему, которая позволяет:

- вести учёт клиентов фитнес-клуба;
- управлять тренерами;
- работать с абонементами (типами абонементов и выданными клиенту);
- фиксировать посещения;
- получать статистику для администратора и менеджера;
- подключить веб-интерфейс (frontend).

Проект изначально проектировался **с прицелом на реальное использование**, а не как формальный учебный пример. Все архитектурные решения принимались осознанно, с учётом удобства поддержки, расширения и интеграции с фронтендом.

---

## **Используемые технологии**

### **Backend**

- **Node.js** — серверная платформа
- **Express.js** — HTTP-сервер и маршрутизация
- **PostgreSQL** — реляционная база данных
- **Prisma ORM** — работа с БД, миграции, типобезопасность
- **ES Modules (ESM)** — единый современный модульный стиль (import / export)

### **Инструменты**

- **Postman** — тестирование API
- **DBeaver** — работа с базой данных
- **nodemon** — удобная разработка

---

## **Архитектура проекта**

Backend построен по **классической многоуровневой (слоистой) архитектуре**, которая используется в реальных production-проектах.

Каждый уровень решает строго свою задачу:

```
src/
 ├─ controllers/   ← HTTP-уровень (req / res)
 ├─ services/      ← бизнес-логика
 ├─ repositories/  ← работа с базой данных (Prisma)
 ├─ routes/        ← маршруты API
 ├─ utils/         ← вспомогательные утилиты (Prisma Client)
 ├─ app.js         ← конфигурация Express
 └─ server.js      ← запуск сервера
```

### **Почему именно так**

Я сознательно **разделил ответственность между слоями**, чтобы:

- контроллеры не содержали бизнес-логики;
- сервисы не зависели от Express;
- репозитории занимались только базой данных;
- код было легко тестировать, читать и расширять.

Такой подход позволяет:

- безболезненно менять базу данных;
- переиспользовать бизнес-логику;
- легко подключить frontend;
- добавлять роли (администратор, менеджер).

---

## **Backend: подробное описание**

### **Принципы backend-реализации**

При разработке backend я придерживался следующих принципов:

- **Единый стиль ESM** — никаких require и module.exports
- **Подробное логирование** — на каждом уровне (controller → service → repository)
- **Валидация входных данных**
- **Предсказуемые HTTP-ответы**
- **REST API без «магии»**

Каждый запрос можно отследить по логам и понять, на каком этапе он обрабатывается.

---

## **Модуль: Клиенты (Clients)**

### **Назначение**

Модуль отвечает за управление клиентами фитнес-клуба.

Реализованы следующие возможности:

- создание клиента;
- получение списка клиентов;
- получение клиента по ID;
- обновление данных клиента;
- мягкое удаление (деактивация).

### **Модель клиента**

Клиент хранит только действительно нужные данные:

- имя и фамилия раздельно (удобно для таблиц и фильтрации);
- дата рождения;
- email и телефон;
- флаг активности.

### **API-запросы**

**POST /api/clients** — создать клиента

```
{
  "firstName": "Алексей",
  "lastName": "Иванов",
  "email": "alex@test.ru",
  "phone": "+79990001122",
  "birthDate": "2000-01-01"
}
```

**GET /api/clients** — получить всех клиентов

**GET /api/clients/:id** — получить клиента по ID

**PUT /api/clients/:id** — обновить данные клиента

```
{
  "lastName": "Фёдоров",
  "phone": "+79991112233"
}
```

**DELETE /api/clients/:id** — мягкое удаление клиента

---

## **Модуль: Тренеры (Trainers)**

### **Логика**

Тренеры реализованы как **отдельные независимые сущности**.

Я сознательно **не стал жёстко связывать тренеров с клиентами**, так как:

- клиент может заниматься без тренера;
- тренеры могут быть временно неактивны;
- связь может понадобиться позже и в другой форме.

Реализован мягкий флаг активности.

### **API**

- **POST /api/trainers**
- **GET /api/trainers**
- **GET /api/trainers/:id**
- **PUT /api/trainers/:id**
- **DELETE /api/trainers/:id**

---

## **Модуль: Типы абонементов (Subscription Types)**

### **Почему выделен отдельно**

Я разделил:

- **типы абонементов** (шаблоны);
- **абонементы клиента** (конкретная выданная подписка).

Это позволяет:

- централизованно управлять тарифами;
- менять стоимость и длительность;
- использовать типы повторно.

### **API**

- **POST /api/subscription-types**
- **GET /api/subscription-types**
- **PUT /api/subscription-types/:id**
- **DELETE /api/subscription-types/:id**

---

## **Модуль: Абонементы клиентов (Client Subscriptions)**

### **Логика**

Абонемент клиента:

- привязан к клиенту;
- ссылается на тип абонемента;
- автоматически рассчитывает дату окончания;
- может быть активным, замороженным или завершённым.

### **Возможности**

- выдать абонемент клиенту;
- получить активный абонемент;
- получить историю абонементов;
- заморозить абонемент.

### **API**

- **POST /api/client-subscriptions**
- **GET /api/client-subscriptions/client/:id**
- **POST /api/client-subscriptions/freeze/:id**

---

## **Модуль: Посещения (Visits)**

### **Назначение**

Модуль фиксирует факт посещения клиентом клуба.

Посещения используются:

- для статистики;
- для анализа активности клиентов;
- для отчётов.

### **API**

- **POST /api/visits** — отметить посещение
- **GET /api/visits** — список посещений
- **GET /api/visits/client/:id** — посещения клиента

---

## **Модуль: Статистика (Stats)**

### **Назначение**

Модуль статистики предназначен для **администратора и менеджера**.

Он позволяет получать агрегированные данные без прямого доступа к БД.

### **Реализованные кейсы**

- общая сводка по системе;
- количество посещений по дням;
- топ клиентов по активности;
- клиенты без активной подписки;
- подписки, которые скоро закончатся.

### **API**

- **GET /api/stats/summary**
- **GET /api/stats/visits-by-days?days=7**
- **GET /api/stats/top-clients?limit=5**
- **GET /api/stats/clients-without-subscription**
- **GET /api/stats/subscriptions-expiring?days=7**

---

## **Логирование и отладка**

Каждый слой логирует свою работу:

- [CONTROLLER] — вход HTTP-запроса
- [SERVICE] — бизнес-логика
- [REPOSITORY] — операции с БД

Это позволяет:

- быстро находить ошибки;
- понимать поток данных;
- удобно демонстрировать работу проекта.

---

## **Frontend (в разработке)**

Frontend будет реализован отдельно и подключён к уже готовому backend.

Планируется:

- таблицы клиентов, тренеров, абонементов;
- формы создания и редактирования;
- dashboard со статистикой;
- роли (менеджер / администратор).

---

## **Итог**

Проект реализован с пониманием архитектуры, бизнес-логики и будущего масштабирования.\*\*\*\*
